###Linux 文件结构
在 Linux 或 Unix 操作系统中，所有的文件和目录都被组织成以一个根节点开始的倒置的树状结构。  
文件系统的最顶层是由根目录开始的，系统使用`/`来表示根目录。在根目录之下的既可以是目录，也可以是文件，而每一个目录中又可以包含子目录文件。  
在Linux文件系统中有两个特殊的目录，一个用户所在的工作目录，也叫当前目录，可以使用一个点 `.` 来表示；另一个是当前目录的上一级目录，也叫父目录，可以使用两个点 `..` 来表示。    

`~`&ensp;表示代码主目录，也就是当前登录用户的用户目录，也可以使用 `~/` 来表示；    
`.`&ensp;代表当前的目录，也可以使用 `./` 来表示；    
 `..`&ensp;代表上一层目录，也可以 `../` 来代表。    

如果一个目录或文件名以一个点 `.` 开始，表示这个目录或文件是一个隐藏目录或文件(如 &ensp;`/.bashrc`)。即以默认方式查找时，不显示该目录或文件。  

在终端输入 `ls /` 即可查看Linux根目录下的各个目录
![](imgs/linux_1.jpg)

根目录系统下通常包含以下一些目录

|目录名|作用|
|--|--|
|/bin|是Binary的缩写，存放最经常使用的命令|
|/dev|是Device的缩写，该目录下存放的是Linux的外部设备，在Linux中访问设备的方式和访问文件的方式是相同的。|
|/home|是用户的主目录，每个用户都拥有自身的一个目录，一般以自身用户名命名。相当于Windows中的User目录|
|/lib|存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。
|/mnt|系统提供该目录是为了让用户临时挂载别的文件系统的，可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。|
|/proc|是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。|
|/srv|目录存放一些服务启动之后需要提取的数据。
|/tmp|目录存放临时文件|
|/var|这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。|
|/boot|这里存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。|
|/etc|目录用来存放所有的系统管理所需要的配置文件和子目录。|
|/media|linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。|
|/opt|这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。|
|/root|该目录为系统管理员，也称作超级权限者的用户主目录。|
|/sbin|s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。|
|/sys|2.6内核中新出现的一个文件系统。sysfs文件系统集成了下面3种文件系统的信息： 针对进程信息的proc文件系统、针对设备的devfs文件系统以及针对伪终端的devpts文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建。|
|/usr|这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录。
|/lost+found|这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。|

删除或更改某些文件目录不会影响整个系统，但是有一些目录是不能随意删除或者更改的，如：   
`/etc`：该文件存放的是系统中的配置文件，如果更改了该目录的某个文件可能导致系统无法正常启动。    
`/bin, /sbin`, `/usr/bin`, `/usr/sbin`：都是系统预设的执行文件的放置目录，比如 ls 就是在/bin/ls 目录下的。更改或删除会导致指令无法执行。  
`/var`：是一个非常重要的目录，系统上跑了很多程序，许多程序的数据都会存放在这里。更改删除会导致系统程序的运行错误。  

###Linux文件基本属性
Linux系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限。为了保护系统的安全性，Linux系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。  
在Linux中可以使用`ll`或者`ls –l`命令来显示一个文件的属性以及文件所属的用户和组，如：  
![](imgs/linux_2.png)
图中显示的第一行total是表示该目录下所有文件的总大小，从第二行开始则表示每个文件的详细信息，从左到右一共有七项信息：  

+ 第一项，表示文件的属性。    
Linux的文件基本上分为三个属性：可读(r)，可写(w)，可执行(x)。一个文件属性以10个字符表示(具体程序实现时，实际上是十个bit位)。  
第一个字符是特殊表示字符，表示目录或连结文件等等，`d`表示目录，例如`drwx------`；`l`表示连结文件，如`lrwxrwxrwx`；`-`则表示这是文件。其余剩下的字符就以每3个字符为一个单位。  
因为Linux是多用户多任务系统，所以一个文件可能同时被许多人使用，所以我们一定要设好每个文件的权限，其文件的权限位置排列顺序是(以`-rwxr-xr-x`为例)：`rwx`(Owner)`r-x`(Group)`r-x`(Other)。这个例子表示的权限是：使用者自己可读，可写，可执行；同一组的用户可读，不可写，可执行；其它用户可读，不可写，可执行。另外，有一些程序属性的执行部分不是X,而是S,这表示执行这个程序的使用者，临时可以有和拥有者一样权力的身份来执行该程序。一般出现在系统管理之类的指令或程序，让使用者执行时，拥有root身份。    　 　  
+ 第二项，表示文件个数。  
如果是文件的话，那这个数目自然是1了，如果是目录的话，那它的数目就是该目录中的文件个数了。　　    
+ 第三项，表示该文件或目录的拥有者。  
若使用者目前处于自己的Home,那这一栏大概都是它的账号名称。　　    
+ 第四项，表示所属的组（group）。  
每一个使用者都可以拥有一个以上的组，不过大部分的使用者应该都只属于一个组，只有当系统管理员希望给予某使用者特殊权限时，才可能会给他另一个组。　　    
+ 第五项，表示文件大小。  
文件大小用byte来表示，而空目录一般都是1024byte，你当然可以用其它参数使文件显示的单位不同，如使用`ls –k`就是用kb来显示一个文件的大小单位，不过一般我们还是以byte为主。　　    
+ 第六项，表示创建日期。  
以“月，日，时间”的格式表示，如Aug 15 5：46表示8月15日早上5：46分。　　 
+ 第七项，表示文件名。  
我们可以用`ls –a`显示隐藏的文件名。  

###Linux的 Shell bash
Linux中，管理整个计算机硬件的其实是操作系统的内核(kernel)，这个内核是需要被保护的。 所以一般使用者就只能通过 shell 来跟核心沟通，以让核心达到我们所想要达到的工作。所以shell可以说是与内核进行交互的应用程序，它提供接口给操作者，去与内核以及其他应用程序进行交互。当然，最直观的shell表达就是：命令行。  
Linux的shell有很多种，例如sh、bash、csh、tcsh、ash 等等。其中最常用的就是bash，所以这里也就仅介绍最常用的shell。  
######bash的变量
和很多程序语言一样，bash提供了变量功能，以此来简化指令的输入内容，同时也利于后续的自动化操作。同时bash的变量是弱类型的，使得变量使用变得更加方便。  
变量的赋值十分简单，使用等号即可赋值，如`test="Hello World"`即可将Hello World赋值给test。需要注意的是，变量名称只能是英文字母与数字，但是开头字符不能是数字；同时等号两边不能有空格；如果变量内容有空格则需要双引号或者单引号将变量内容括起来。  
需要获取变量的值时，则需要使用`$`符号，如`$test`或者`${test}`会取出test变量中的具体内容。需要注意的是获取一个没有赋过值的变量则会取出空内容。如图
![](imgs/linux_3.png)
上面讲的是shell变量，是作用于一个shell程序内的，还有一种变量称作环境变量，是作用于程序之间的变量。  
使用`env`指令可以列出所有环境变量，使用`set`可以列出所有自订变量和环境变量。  
使用`export`指令可以自己设定环境变量，如`export MYENV=50`。  
环境变量名由大写字母，下划线以及数字组成，同时数字与下划线不能为第一位。  
###Linux的 Shell scripts
 Shell scripts(程序化脚本)是利用 shell 的功能所写的一个“程序 (program)”，这个程序是使用纯文本文件，将一些 shell 的语法与指令（含外部指令）写在里面， 搭配正则表达式、管线命令与数据流重导向等功能，以达到我们所想要的处理目的。  
类似早期 DOS 年代的批处理文件(.bat)，最简单的功能就是将许多指令汇整写在一起， 让使用者很轻易的就能够 以one touch 的方法去处理复杂的动作。Shell scripts也更利于自动化，方便持续集成。  

在这里给出一个简单的Hello World示例
```
[root@mcd-dce-controller ~]$ vim hello.sh
#!/bin/bash
# Program：
# This program shows "Hello World!" in your screen.
# History：
# 2015/07/16 VBird First release
PATH=/bin：/sbin：/usr/bin：/usr/sbin：/usr/local/bin：/usr/local/sbin：~/bin
export PATH
echo -e "Hello World! \a \n"
exit 0
```
之后在同一目录下执行`sh hello.sh`即可得到程序输出 Hello World!  

脚本的语法与C语言十分类似，同样包含循环，判断等等。因为脚本是使用shell来执行的，所以脚本的函数则是shell里的各种指令。  



###指令介绍
+ 目录与文件命令  
	1. 目录处理命令：  
		+ mkdir：创建新目录  
			`mkdir -p [目录名]`：递归创建(若父文件夹不存在则先创建父文件夹)  
		+ rm：删除目录   
			`rm -r [目录]`：删除目录
			`rm -p [文件或目录]`：强制执行  
		+ ls：显示目录文件  
			`ls -a`：显示所有文件，包括文件目录  
			`ls -l`：显示详细信息  
			`ls -d`：显示目录信息  
			`ls -i`：查看i节点  
		+ find：目录搜索  
			`find [目录]`：搜索名为[目录]的目录
		+ cd：切换目录  
			`cd [目录]`：切换至名为[目录]目录  
 		+ mv：剪切文件  
			`mv [源文件或目录][目标目录]`：剪切文件  
		+ cp：复制文件或目录，可以在复制时重命名  
			`cp -r`：复制目录  
			`cp -p`：保留文件属性  
		+ pwd：显示当前目录  
		+ chmod：改变文件或目录权限   
			`chmod [权限] [文件名]`：改变文件或目录权限，用三位八进制数字的形式来表示权限，第一位指定属主的权限，第二位指定组权限，第三位指定其他用户的权限，每位通过4(读)、2(写)、1(执行)三种数值的和来确定权限。  
	2. 操作文件命令：
		+ touch：创建空文件：  
			`touch [文件名]`：创建名为[文件名]的空文件
		+ rm： 删除文件  
			`rm -f [文件名]`：删除文件 
		+ find：文件搜索  
			`find [文件名]`：搜索名为[文件名]的文件
		+ cat：显示文件内容：  
			`cat [文件名]`：显示文件内容  
			`cat -n [文件名]`：显示行号  
		+ more：分页显示文件内容  
			空格或f：翻页  
			(Enter)：换行  
			Q或q：推出  
		+ less：分页显示文件内容，可以向前翻页  
			[pagedown]：向下翻页  
			[pagedown]：向上翻页  
	3. 压缩/解压命令：  
		+ gzip：将文件压缩为格式为.gz的压缩文件    
			`gzip [文件名]`  
		+ bzip2：将文件压缩为格式为.bz2的压缩文件  
			`bzip2 -k  [文件名]`：压缩后保留原文件  
		+ tar： 将目录打包并压缩压缩为格式为.tar.gz的压缩文件  
			`tar -c`：打包  
			`tar -v`：显示详细的tar处理的文件信息  
			`tar -f`：指定解压文件（解压时）  
			`tar -v`：显示详细信息(解压时)  
			`tar -z`：打包同时压缩  
			`tar -x`：解包（解压时）
	4. 其他常用命令：  
		+ head：显示文件前面几行  
			`head -n [行数]`：显示文件前[行数]行，默认为10行  
		+ tail：显示文件后面几行  
			`tail -n [行数] [文件名]`：显示文件后[行数]行，默认为10行  
			`tail -f [文件名]` ：动态显示文件末尾内容
		+ wc：计算文件的Byte数、字数、或是列数，若不指定文件名称  
			`wc -l [文件名]`：统计行数  
			`wc -w [文件名]`：统计单词数  
			`wc -c [文件名]`：统计字符数  
		+ ln：生成链接文件  
			`ln -s [原文件] [目标文件]`：创建软连接（类似于windows中的快捷方式）
		+ mount：挂载Linux系统外的文件  
			`mount [设备文件名] [挂载点]`：将设备文件挂载在挂载点下  
			`mount -o [设备文件名] [挂载点]`：将设备文件用只读模式挂载在挂载点下  
		+ curl：文件下载  
			`curl [下载地址]`：从下载地址下载文件  
			`curl -o [文件名] [下载地址]`：将文件保存为命令行中指定的文件名的文件中  
			`curl -O [下载地址]`：使用URL中默认的文件名保存文件到本地  
		+ export： 设置或显示环境变量  
			`export -f [变量名称]=[变量设置值]`：代表[变量名称]中为函数名称。  
			`export -n [变量名称]`：删除指定的变量。变量实际上并未删除，只是不会输出到后续指令的执行环境中。  
			`export -p`：列出所有的shell赋予程序的环境变量。  
        + grep：使用正则表达式搜索文本，并把匹配的行打印出来     
        `grep [文本] [文件] [文件2] [文件3] ...`：在多个文件中搜索文本，并将文本所在行打印出来    
        `grep -v [文本] [文件]`：在文件查找文本，并输出除文本所在行之外的所有行    
        `grep -E [正则表达式]`：使用正则表达式查找文本    
+ 用户操作命令  
    + useradd：创建的新的系统用户    
        `useradd -g [用户组名] [用户名]`：创建用户并加入用户组    
        `useradd -r [用户名]`： 创建系统用户   
    + userdel：删除给定的用户   
        `userdel [用户名]`：删除用户但不删除其用户目录和文件     
        `userdel -r [用户名]`：删除用户并删除目录及文件   
    + usermod：修改用户的基本信息   
        `usermod -g [用户组名] [用户名]`：修改用户所属用户组  
        `usermod -l [新用户名] [用户名]`：修改用户名   
        `usermod -L [用户名]`：锁定用户   
        `usermod -U [用户名]`：解锁用户   
    + passwd：设置用户的认证信息，包括用户密码、密码过期时间等   
        `passwd [用户名]`：更改或创建用户密码   
        `passwd -d [用户名]`：清除用户密码   
+ 用户组操作命令   
    + groupadd：用于创建一个新的工作组，新工作组的信息将被添加到系统文件中   
        `groupadd [用户组名]`：创建用户组   
        `groupadd -g [用户组id] [用户组名]`：创建用户组并指定id   
    + groupdel：删除指定的工作组   
        `groupdel [用户组名]`：删除用户组     
    + groupmod：更改群组识别码或名称   
        `groupmod -g [群识别码]`：设置欲使用的群组识别码    
        `groupmod -n [新组名] [用户组名]`：更改用户组名称   
+ 安装软件命令     
    + rpm：RPM软件包的管理工具，功能强大方便   
    `rpm -i [程序包名.rpm]`：安装程序包并输出相关信息   
    `rpm -e [程序包]`：删除安装的程序包   
    `rpm -qa`：讲列出所有安装过的包  
    + yum：是在Fedora和RedHat以及SUSE中基于rpm的软件包管理器   
    `yum install [程序包名]`：安装程序包   
    `yum groupinsall [程序组名]`：安装程序组   
    `yum update`：更新软件信息   
    `yum update [程序包名]`：更新程序包的信息   
    `yum check-update`：检查可更新的程序   
    `yum upgrade [程序包名]`：升级指定程序包   
    `yum groupupdate [程序组名]`：升级程序组   
    `yum list installed`：显示已安装的包   
    `yum remove [程序包名]`：删除程序包   
    `yum groupremove [程序组名]`：删除程序组   
+ 网络命令    
    + ping：用来测试主机之间网络的连通性    
    `ping www.baidu.com`：连接百度来查看网络连通性   
    + ifconfig：用于配置和显示Linux内核中网络接口的网络参数    
    `ifconfig`：显示网络设备信息（激活状态的）     
    `ifconfig [网卡名] up`：开启指定网卡    
    `ifconfig [网卡名] down`：关闭指定网卡    
    `ifconfig [网卡名] [ip地址] netmask [子网掩码] broadcast [广播地址]`：配置网卡ip等信息    
    + netstat；用来打印Linux中网络系统的状态信息，可让你得知整个Linux系统的网络情况。    
    `netstat -a`：列出所有端口   
    `netstat -l`：显示监听端口   
    `netstat -s`：显示所有端口的统计信息   
    `netstat -c`：每隔一秒输出网络信息   
    `netstat -i`：显示网络接口列表   
