# 看板

&emsp;&emsp;在“看板”页面中，您可以查看应用的具体情况，对平台的应用进行快速了解。
点击页面左上角，有单一应用或者所有应用、最近30天或者最近7天两种选项，您可以根据需要进行选择来查看应用的情况。  

示例选择<font face="黑体">“所有应用”</font>和<font face="黑体">“最近30天”</font>进行说明（共9项数据展示）：  
1. 部署应用：显示部署的总次数、部署的成功次数、部署的失败次数。  
2. 实例总数：最近30天部署实例的总个数。  
3. 部署报告：显示出一张最近30天内应用部署成功和失败次数的柱状图（蓝色为部署成功；红色为部署失败），鼠标移动至图表上可查看具体每一天的部署成功和失败的次数。  
4. 部署成功率：仪表盘内显示最近30天内的部署成功率，历史平均成功率是指您第一次开始部署应用至今的成功率。  
5. 实例动态：实例部署的状态显示（成功/失败/更新中）以及具体部署的时间显示（只显示最近5条）。  
6. 流水线构建报告：显示最近30天内每天流水线构建成功和失败的次数（蓝色为构建成功；红色为构建失败），鼠标移动至图表上可查看具体每一天的流水线构建所用的时间。  
7. 流水线构建成功率：仪表盘内显示最近30天内的流水线构建的成功率，历史平均成功率是指您第一次开始构建流水线至今的成功率。  
8. 流水线日均构建时间：显示出一张最近30天内流水线构建所用时间的折线图（蓝色为每天构建流水线所用的时间总计；灰色虚线为30天内所用时间的平均值），鼠标移动至图表上可查看具体每一天的流水线构建成功和失败的次数。  
9. 流水线动态：流水线构建的状态显示（成功/失败/正在执行）以及具体构建的时间显示（只显示最近5条）。  

![](./images/kanban.png)
## 个人中心
### 个人信息
点击右上角“个人中心”中的“个人信息”，可查看个人信息页面，如下图：

![个人信息](./images/gerenxinxi.png)

1. 头像
该页可更换个人头像，头像将展示在页面右上角。
头像支持 JPG,PNG 格式，文件大小需要限制在1M 内。  
2. 用户名  
用户名不支持更改。
3. 邮箱  
可设置多个邮箱，但有且仅有一个作为主邮箱，用于接收通知类以及审批类信息。
主邮箱需要激活后生效。
### 代码托管
登录Daocloud后，您可选择在个人中心→代码托管。  

![代码托管](./images/daima.png)

绑定您的GitHub Enterprise账户或者GitLab账户，这样以便在创建项目时可以关联您所需的代码源。

![关联代码源](./images/bangding.png)

1. GitLab绑定与解绑  
在示例中我们选择绑定GitLab账户，输入您的用户名、Token，点击“确认”，完成绑定。
  
![绑定代码](./images/bangding1.png)

Token的获取：登录您的GitLab账号，点击头像进入"Settings"，在左侧栏中选定"Access Tokens"，再在右边输入名字，选择Scopes，最后点击“Create Personal access token”。
  
![生成token](./images/bangding2.png)

您的“Personal Access Token”就生成了！将其复制到绑定账号界面的“Token”栏即可。

![绑定token1](./images/bangding3.png) 

![绑定token2](./images/bangding4.png)
#### SVN仓库配置
##### svn自动触发配置说明文档
###### 获取Token
1. 进入需要配置 WebHook 的 SVN 项目中。  
2. 打开浏览器调试工具、在调试串口选择XHR标签，刷新页面。选择第5条请求，点击右侧Preview的标签，展开repo项，保存hook_tooken和hook_secret字段信息。
  
![获取token](./images/token.png)

<center>图1 获取 SVN 项目 Token</center>  
###### 配置SVN Hook
1. 下载 daosvnhook 二进制文件 http://dao-get.daocloud.io/dcs/daosvnhook-v2.0.zip，选择符合自身平台类型的文件，并将选择的文件放于svn仓库中的任意路径下。  
2. 在 svn 仓库的 hooks 目录下找到 post-commit 文件，在文末添加3中的命令，如果不存在则复制 post-commit.tmpl 到 post-commit下。  
3. 参考配置文件，按照以下规则组装命令。

&emsp;* [二进制文件位置]对应参数为1中下载的 daosvnhook 二进制文件在svn仓库中放置的相对路径  
&emsp;* 图1中已获取的secret和token参数如下：
 
![配置token](./images/tokenkey.png)
  
&emsp;* 则命令的url参数为：http://111.111.111.111/external/hook/81938a85-ea39-4173-9c05-466108ecfd61    （其中IP-111.111.111.111需要替换为对应DCS平台的地址）  
&emsp;* 命令的token参数为：038dea8a-ff1e-485c-b3e9-b3bcdfa71eaa

最终在post-commit 文件末尾添加的完整命令如下： 

![](./images/result.png) 

<center>图2 post-commit 文件添加命令</center>
注：由于版本问题，<svn hook 参数> 会不同 ( 以1.9为界限 )  
a.svn 1.9 或以上版本<svn hook 参数> = $1 $2 $3  
b.svn 1.9 以下版本<svn hook 参数> = $1 $2 TXN_NAME  

###### 创建项目—SVN代码源
可支持选择具体的仓库目录结构。如需自动push代码，请前往至“查看文档”按说明进行配置即可。 

![svn代码源](./images/2-2-2-2.png)

### 我的组织
1. 我的组织列表
在“个人中心”—>“我的组织”中，您可以看到您现在所属的组织以及在该组织中所拥有的权限。  
在这里可以选择“离开”选中组织。

![组织列表](./images/2_2_3_1.png)
  
2. 创建组织  
在该页面可以创建新组织，输入组织名称即完成创建。创建完成后会跳转到对应新组织页面。

![创建组织](./images/2_2_3_2.png)
### 订阅通知
1.流水线订阅方式
在具体的流水线中点击右上角的“订阅”按钮，并确认在何种情况（执行失败、执行成功、状态发生变化）下需要接受该条流水线的通知。

![订阅](./images/2_2_4_1.png)

 假设选择“执行成功”时通知我，在流水线执行成功后会向“个人中心”中已绑定的主邮箱发送通知邮件，如下图所示：

![通知邮件](./images/2_2_4_2.png)

2.订阅的流水线列表  
您可以在个人中心→订阅的流水线中查看您之前所订阅的流水线，方便查看您所关注的流水线列表。

![流水线列表](./images/2_2_4_3.png)

您也可以在“订阅的流水线”中选择删除您不需要再关注的流水线。点击“”取消订阅。

![取消订阅](./images/2_2_4_4.png)

也可同时选择多条流水线，进行批量取消订阅。

![批量取消](./images/2_2_4_5.png)

## 组织中心

    mkdocs.yml    # The configuration file.
    docs/
        index.md  # The documentation homepage.
        ...       # Other markdown pages, images and other filesi.
### 团队与权限
进入组织中心的团队管理界面

![团队与权限](./images/2_3_1_1.png)

1.创建团队  
我们可以在这里选择创建一个新的团队。
创建团队需要输入团队名称，如果团队同步自 LDAP 团队，需要输入 LDAP 团队名称。

![创建团队](./images/2_3_1_2.png)

2.团队管理

接下来可以对团队成员列表进行管理（当前用户会作为创建者自动加入），并对团队成员进行权限管理。
在“成员列表”的搜索框中可以搜索需添加成员，并将其添加入当前团队。

![团队管理](./images/2_3_1_3.png)
#### 权限
在“应用授权”页面可以进行团队应用权限的添加和移除，进行当前团队对于不同应用的权限操作管理。

![应用授权](./images/2_3_1_4.png)

在“集群授权”页面可以进行团队集群权限的添加和移除，进行当前团队对于不同集群的权限操作管理。

![集群授权](./images/2_3_1_5.png)

在“设置”中，可以对当前团队名称进行修改，点击“保存”即为修改成功。
可以修改 LDAP 团队的对应名称。
也可以在设置中删除当前团队（此操作不可恢复）。
![删除团队](./images/2_3_1_6.png)

### 组织信息
点击组织左侧边栏的“组织中心”进入组织管理页面。  
1.默认组织  
初次进入系统时创建的组织为默认组织，该组织不可删除，名称不可修改。其组织信息页面如下：

![组织信息](./images/2_3_2_1.png)

2.手动创建的组织
在系统中手工创建的组织，名称不可修改，组织信息页面可实现删除组织：

![创建组织](./images/2_3_2_2.png)
### 组织成员
在这里可以看到该组织的所有成员以及其相对应的权限。
创建者和管理者可以进行“移除成员”和“邀请成员”。  

1.管理员视角

1.1 移除成员

![移除成员](./images/2_3_3_1.png)

1.2 邀请成员  
需输入成员名称。

![邀请成员](./images/2_3_3_2.png)

您可以点击搜索框旁的“待接受邀请”，查看您所邀请的成员。
如果您不想邀请此成员，点击成员右侧的“移除”即可。

![移除](./images/2_3_3_3.png)

![成员](./images/2_3_3_4.png)

2.普通成员视角  

普通成员仅仅只能查看组织内的成员名称信息以及权限，不能进行其它的任何操作。

![普通成员视角](./images/2_3_3_5.png)
## 应用管理
###创建应用
点击页面左侧导航栏的“应用”，选择“创建应用”。

![创建应用](./images/2_4_1_1.png)

输入应用名称，并给团队授予权限（权限分别有Guest、Reporter、Develop、Master），点击“-” 即可删除此授权团队的权限。

![删除权限](./images/2_4_1_2.png)

###应用列表管理
点击左侧导航栏的“应用”，可以看到当前所有已创建应用的具体信息。  
在右侧的“”中您可以对该应用的授权团队进行更改操作和删除此应用的操作。

![列表](./images/2_4_2_1.png)

1.更改权限  
可以通过搜索团队给新的团队添加应用权限。

![更改权限](./images/2_4_2_2.png)

2.删除应用

![删除应用](./images/2_4_2_3.png)

删除应用会删除其附带的项目、流水线和全部制品，请慎重操作。

###应用详情
####项目列表  
1.创建项目  
在应用列表中点击“创建项目”，默认所属应用为当前应用，输入项目名称，选择类型，确定项目所需关联的代码源，选择项目完成后的制品的存放地址，最后点击“立即创建”。

![项目列表](./images/2_4_3_1.png)

项目类型分为：  
-- 开发类：关联的代码源为实际研发代码，可以通过流水线实现测试、构建制品的项目。  
-- 部署类：关联的代码源存放部署所需的脚本等信息，可用于部署实例的项目。 

2.项目详情  
您可以在应用中看到您刚刚所创建的项目的详细信息。

![项目详情](./images/2_4_3_2.png)

您还可以勾选项目，将其移动到其他应用中去。

![](./images/2_4_3_2_1.png)

选择所要移动到的目标应用，点击“确认”。

![确认](./images/2_4_3_2_2.png)

项目详情见：项目详情
####部署应用
1、SaltStack  
部署需要可以创建出制品的开发类项目以及存放脚本的部署类项目：

![部署应用](./images/2_4_3_2_3.png)

在部署管理点击部署项目进入部署页面：

![部署页面](./images/2_4_3_2_4.png)

填写实例信息进行部署

![实例信息](./images/2_4_3_2_5.png)

实例名称：输入您需要的实例名称  
应用：实例所在应用名称  
项目：实例所在项目  
制品版本：所需部署的版本  
自动发布：是否需要自动发布  
脚本：部署类项目  
分支/标签/哈希号：脚本文件所对应的版本  
文件路径：部署脚本所在路径  
部署位置：集群名称  
部署后可在执行记录中查看结果：  

![](./images/2_4_3_2_6.png)

2.平台  
部署需要可以创建出制品的开发类项目以及存放 YAML 的部署类项目：

![](./images/2_4_3_2_7.png)

在部署管理点击部署项目进入部署页面：

![](./images/2_4_3_2_8.png)

填写实例信息进行部署

![](./images/2_4_3_2_9.png)

实例名称：输入您需要的实例名称  
应用：实例所在应用名称  
项目：实例所在项目  
制品版本：所需部署的版本  
自动发布：是否需要自动发布  
脚本：部署类项目  
分支/标签/哈希号：YAML 文件所对应的版本  
文件路径：部署 YAML 所在路径  
部署位置：集群名称  
其中部署 YAML（deploy-2048.yml）：  

![](./images/2_4_3_2_10.png)

部署后可在执行记录中查看结果：

![](./images/2_4_3_2_11.png)


####版本管理
1.版本管理  
应用下可以设置应用版本，用于记录本次应用和其下制品版本的关系，可便于部署或回滚操作。  
点击应用详情内的“版本管理”，通过左方的下拉选项卡可以筛选自己需要的版本，选定后可查看版本详情，包括项目以及制品版本和备注信息。  
右侧“”可删除本条版本。  

![版本管理](./images/2_4_3_3_1.png)

2.新建版本  
您可以点击右方“新建版本”按钮为当前应用设置一个版本。  
首先需要设置版本名称；  
创建时会自动引入当前的项目列表，选择需要标记的项目的制品版本；  
填写该版本的备注信息，帮助您更好的记录版本信息。  
填写完成后点击“确认”。 
 
![新建版本](./images/2_4_3_3_2.png)

####权限管理
添加授权团队：点击“搜索团队”，选择需要添加的团队，并授予该团队相应的权限  
移除已授权团队：点击“”，即可移除团队，即该团队对于此应用不再有任何的访问权限。  

![权限管理](./images/2_4_3_4_1.png)


####应用设置
您可以选择删除当前的应用，但请注意此操作不可恢复！

![应用设置](./images/2_4_3_5_1.png)

## 项目管理
### 创建项目
1.您可点击左侧栏的“项目”栏，在项目列表页可以看到“创建项目”的按钮。

![创建项目](./images/2_5_1_1.png)

2.点击按钮，输入项目名称，选择此项目所属的应用，选择类型，确定项目所需关联的代码源，选择项目完成后的制品的存放地址，最后点击“立即创建”。


![创建项目](./images/2_5_1_2.png)

项目类型分为：  
--开发类：关联的代码源为实际研发代码，可以通过流水线实现测试、构建制品的项目。  
--部署类：关联的代码源存放部署所需的脚本等信息，可用于部署实例的项目。  
--项目即创建完毕！
### 项目列表管理
点击左侧“项目”，您可以查看所有您的已创建项目的具体信息（项目名称、项目类型、代码仓库、所属应用、最近一次的更新时间）。  
您可根据您的需要对已创建项目进行批量删除或者逐一删除。

![列表管理](./images/2_5_2_1.png)
### 项目详情
#### 流水线列表
1.创建流水线  
在项目列表中点击“创建流水线”，默认所属项目为当前项目，输入流水线名称，点击“立即创建”。  

![流水线](./images/2_5_3_1.png)
2.流水线详情  
您可以在项目中看到您刚刚所创建的流水线列表及其详细信息：名称、执行记录编号、状态和最近更新时间。  
您也可以选择删除它们。   

![流水线](./images/2_5_3_2.png)

流水线详情见：流水线详情

#### 制品列表
在这里您可以看到所有属于当前项目的制品的详细信息，包括版本号、大小、最近更新的时间。

![制品列表](./images/2_5_3_3.png)

#### 项目设置
项目详情的设置页中可以更新代码源和删除项目。

![项目设置](./images/2_5_3_4.png)

##### 更改代码源
代码源更改：您可以在此选择GitHub Enterprise或者GitHub的其它代码仓库中的代码源对原有代码源进行替换。

![更改代码源](./images/2_5_3_5.png) 

##### 删除项目
删除项目：删除项目内所有内容，注意此操作不可恢复！


## 流水线管理
> ### 创建流水线
*  您可点击左侧导航栏的"流水线"，在流水线列表页可以看到"创建流水线"的按钮
  ![](./images/2.6.1-1.png)
>  *  点击按钮，需要输入流水线名称，选择您准备创建的流水线术语的项目，点击"立即创建"完成流水线创建。

>> ![](./images/2.6.1-2.png)


> ### 流水线列表管理
*  在这里您可以看到所有已创建流水线的详细信息，包括其所属项目、当前的状态等。您也可以对流水线进行批量删除操作。
  ![](./images/2.6.2-1.png)


> ### 流水线详情
>> 1. 流水线执行记录
 	 在这里，您可以看到当前流水线的所有执行记录的详细信息，包括触发人、状态、耗时等信息。
   ![](./images/2.6.3-1.png)

>>> 点击“执行记录编号”进入执行记录中，  
  您可以看到您在流程定义中定义的所有任务的执行情况（执行成功、正在执行、执行失败）。

>>>（1）执行成功
   ![](./images/2.6.3-1.1.png)
	
>>>（2）正在执行	
  当流水线正在执行时，您可以在流水线结束执行前的任意时间点击“取消执行流水线”，来结束当前流水线的执行。  		
 ![](./images/2.6.3-1.2.png)

>>>（3）执行失败		
  如果流水线执行失败，您可以点击“重新执行流水线”，来重新执行当前流水线。
  ![](./images/2.6.3-1.3.png)

>>> 最后，您可点击进入到具体的一个任务中，来查看具体的操作日志以及其耗时，您也可以选择将日志下载到本地进行存储。
  ![](./images/2.6.3-1.4.png)

		
>> 2.流水线流程定义	
>>>点击流水线详情中的“流程定义”可进入流水线定义页面，在流程定义中可以看到已经有了“git clone”、“测试”、“构建”三个阶段，在每个阶段中您可以自定义需要的任务。

>>>  流水线执行时会按照顺序执行每个阶段（按照此例会先并发执行“git clone”下的所有任务，任务全部完成后再执行“测试”下的所有任务）。

>>>  流水线支持对每个阶段进行操作，点击阶段右侧的“![](./images/2.6.3-1.7.png)”可以为阶段添加任务、重命名阶段名、在左/右侧添加新阶段、删除阶段。：
  ![](./images/2.6.3-1.5.png)

> ### 新建阶段
>> 1.方法一
	
>>> 在该页面可以设置阶段，点击灰色阶段区域右侧的“![](./images/2.6.3-1.6.png) ”可以添加一列新阶段，需要输入阶段名称
  ![](./images/2.6.3.1-1.png)


>> 2.方法二
			
>>> 点击已存在阶段上方的“ ”可以设置和添加阶段，操作包括：  
  (1) 添加任务  
  (2) 重命名当前阶段   
  (3) 在左侧增加一列（新增阶段）  
  (4) 在右侧增加一列（新增阶段） 
  (5) 删除当前阶段

>>> ![](./images/2.6.3.1-2.png)
		
> ### 新建任务
 点击图中的“增加并行任务”可以选择为当前阶段添加任务模板：

>> ![新建任务](./images/2.6.3.2-1.png)

>> 目前模板包括4个：
>
>> * cargo_purefile  
>> * git 代码拉取任务  
>> * 脚本任务  
>> * docker 构建任务  
 ![新建任务](./images/2.6.3.2-2.png)

>> 1.file
				
>>> 在创建项目时会让您选择“制品仓库地址”。如果选择默认本地文件存储，则在任务模板中会显示“file”模板；如果选择默认镜像仓库，则不会显示此模板。

>>> 提取源代码中的某个指定文件作为制品，放入“file-文件存储”类型的制品仓库中。
   如果创建项目时选择的制品仓库类型为“文件存储”，在任务模板的选择中可以看到file 类型。
   ![新建任务](./images/2.6.3.2.1-file.png) 

>>> ![新建任务](./images/2.6.3.2.1-file2.png)
   需要填写源码中要提取的文件名称。

>>> ![新建任务](./images/2.6.3.2.1-file3.png) 

>> 2.git任务
  专门用于拉取代码源信息，仅需要输入 git clone 命令。
		
>>> ![](./images/2.6.3.2.2-git.png) 
		
>> 3.脚本任务	
>>> 输入您期望执行的任意脚本命令，设置环境变量和镜像名称。

>>> ![](./images/2.6.3.2.3-jiaoben.png) 
	
>> 4.构建任务
		
>>> 在创建项目时会让您选择“制品仓库地址”。如果选择默认镜像仓库，则在任务模板中会显示“docker build”模板；如果选择默认本地文件存储，则不会显示此模板。

>>> 目前构建需要调用源代码中的 DockerFile 去完成，所以需要首先编写 DockerFile ，然后将 DockerFile 文件名写在下方“ DockerFile ”输入框中：
		
>>> ![](./images/2.6.3.2.4-goujian.png)
		
>>> DockerFile 编写方式请移步：如何编写 [DockerFile](http://dwiki.daocloud.io/pages/viewpage.action?pageId=15303868 "DcokerFile")	

> ### 触发流水线
>> 1. 手动触发	
  流程设置完成后，选择右上角的“手动触发”，让流水线开始工作。			
  ![触发流水线-手动触发](./images/2.6.3.3-1.png)

>>> 手动触发时需要选择触发分支：
  ![触发流水线-手动触发](./images/2.6.3-3.2.png)

>>> 触发成功后可以看到该流水线已经开始执行：
  ![触发流水线-手动触发](./images/2.6.3-3.3.png)
		

>> 2.自动触发

>>> 自动触发需要首先设置触发条件，接着在提交代码时如果匹配了规则就可以实现自动触发流水线，完成测试构建等操作	
  ![](./images/2.6.3-2.1.png)

>>> 在此可以选择匹配分支或 tag，“满足条件”使用正则来匹配分支或 tag 的名称。可以选择满足条件时完成什么动作，包括：执行任务或不执行任务。
  也可以选择请求合并代码时执行任务。


>> 3.使用Submodule

>>> 参见 ：如何使用 [Submodule](http://dwiki.daocloud.io/pages/viewpage.action?pageId=15303886 "Submodule")

	
>> 4.YAML快速编辑
	
>>> (1) 流水线订阅
   进入流水线详情后可以看到上方有一个订阅下拉框，可以选择在什么条件下订阅该条流水线，条件包括：

>>>> * 流水线执行失败  
>>>> * 流水线执行成功  
>>>> * 流水线状态发生变化  

>>> 在满足条件时，会向您的主邮箱发送通知邮件，提醒您流水线状态变更。

>>> ![](./images/2.6.3-4.1.png)
		

>>> 通知邮件如图：		
  ![](./images/2.6.3-4.2.png)
  订阅的流水线列表可以在个人中心查看和设置，具体参见订阅通知

>>>（2）流水线设置
	
>>>> 在设置中，您可选择操作删除此条流水线（此操作不可恢复！）

>>>> ![](./images/2.6.3-4.3.png)

## 部署管理

> ### 部署列表管理

>> 在这里您可以看到所有已部署完成的实例的详细信息（实例名称、所属应用、所部属的集群位置、最近一次更新的时间）。   
>> 您也可以对实例进行批量删除操作。
	
>>![](./images/2.7.1.png)

> ### 应用的部署
>> 点击左侧导航栏的“部署管理”，选择“部署应用”，您可以选择将应用部署成实例。
  具体操作见"## 部署应用 ##"。   
  ![应用的部署](./images/2.7.2.png)  
 
>> 具体部署应用的操作，参考"## 部署应用 ##"。   
  ![应用的部署](./images/2.7.2-2.png) 

> ### 实例详情
>> 1.详情   
>
>> 在这里，您可以看到对现有部署的相关设置并且可根据需要进行更改。
  您可以重新选择已有版本（详见"## 版本管理 ##"），选择是否需要自动发布，选择新的脚本文件。
  
>> * 点击“保存”后，再点击右上角的“部署”，会对当前应用进行重新部署。
		
>> * 注：保存和部署操作都会在执行记录中显示；点击“保存”仅仅对部署设置进行更改，但不会进行应用，只有点击“部署”才会使更新生效。
  ![实例详情](./images/2.7.3-1.1.png) 

>> *  选择需要部署的项目和版本，点击“更新并部署”，使其生效。
  ![实例详情](./images/2.7.3-1.2.png) 

>> 2.环境的变量  
>>> 支持向部署类项目中部署脚本中传入自定义的环境变量参数，增加部署灵活性。
  可查看部署相关的环境变量，并支持添加和删除，点击“保存”即完成环境变量修改。  
  ![实例详情-环境的变量 ](./images/2.7.3-2.png) 
	
>> 3.执行记录  
>>> 您可以在执行记录中看到部署实例的具体情况，并且可以查看日志。  
  ![实例详情-执行记录](./images/2.7.3-3.png) 

>> 4.部署设置  
>>> 您可以在设置中，选择“删除实例”（此操作不可恢复！）   
  ![实例详情-部署设置](./images/2.7.3-4.png)  
 
## 集群管理
	
> ### 添加集群  
> 
> * 点击左侧导航栏的“集群管理”，在集群列表页可以看到“添加集群”的按钮。
  ![集群管理-添加集群](./images/2.8.1.png)  

> * 添加的集群类型有SaltStack和平台两种：
>>> 1.SaltStack 
> 
>>> * 集群类型——选择SaltStack  
>>> * 授权认证——地址：控制节点的 URL  
>>> * 用户名：SaltStack 的登录用户名  
>>> * 密码：登录用户对应密码   
>>> * 环境标签——在开发环境、测试环境、生产环境中选择其一  
>>> * 权限————选择团队并赋予它对于此集群的相应操作权限（选填）  

> * 最后，点击“确认添加”，即完成SaltStack集群添加。  
  ![集群管理-添加集群的类型](./images/2.8.1-SaltStack.png)  

> * 接入成功后可以看到节点信息：
  ![集群管理-添加集群SaltStack类型](./images/2.8.1-jieru.png)  

>>> 2.平台  

>>> * 集群类型——选择平台  
>>> * 授权认证——地址：控制节点的 URL  
>>> * 用户名：平台的登录用户名  
>>> * 密码：登录用户对应密码  
>>> * 租户：平台租户名  
>>> * 环境标签——在开发环境、测试环境、生产环境中选择其一  
>>> * 权限————选择团队并赋予它对于此集群的相应操作权限（选填）  
	
>>>> 最后，点击“确认添加”，即完成平台集群添加。  
  ![集群管理-添加集群平台类型](./images/2.8.1-pingtai1.png)  
 
>>>> 接入成功后可以看到节点信息：  
  ![集群管理-添加集群平台类型](./images/2.8.1-pingtai12.png)  

> ### 集群列表管理  
>> 点击左侧导航栏的“集群管理”可以查看集群列表：  
  ![集群管理-集群列表管理](./images/2.8.2.png)  

>> 以及该集群下列信息： 
> 
>> * 环境标签  
>> * 系统状态  
>> * 主机数  
>> * 磁盘用量  
>> * 内存用量  

>> 以及可以通过团队更改集群权限和删除集群。
  ![集群管理-删除集群](./images/2.8.2-jiqun.png)  

> ### 集群详情  
>> 1.主机列表   
>>> 在这里，您可以看到当前集群下的所有主机的具体信息，包括其状态、CPU、内存等。  
  ![集群详情-主机列表](./images/2.8.3-zhujiliebiao.png)  

>> 2.权限  
>>> 在“权限管理”中，你可以进行团队集群权限的添加和移除，并对已授权的团队的权限进行更改。  
  ![集群详情-权限](./images/2.8.3-quanxian.png)  
	
>> 3.集群设置  
>>> 在设置中，您可以修改当前集群名称，更新授权认证，重新选择环境标签，删除集群（此操作不可恢复！）。  

>> 4.修改集群名称  
>>> ![集群详情-修改集群名称](./images/2.8.3-4.png)  
	
>> 5.更新授权认证  
>>> 在更新授权认证中输入新的地址、用户名、密码、租户（平台集群），点击确认即完成授权认证的更新。  
  ![集群详情-更新授权认证 ](./images/2.8.3-5.png)  

>> 6.环境标签  
>>> 可更换当前集群的环境标签：
>  
>>> * 生产环境  
>>> * 测试环境  
>>> * 开发环境  

>> 7.删除集群  
>>> 此操作不可恢复，会删除包括实例在内的所有内容，请慎重操作。
			

## 制品仓库

> ### 制品列表  
>> 在这里，您可以看到所有项目所产生制品的列表，制品名称默认与项目名称一致。该列表页展示了： 
> 
>>   * 制品名称  
>>	* 制品最新版本号  
>>	* 制品存储的地址  
>>	* 最近更新时间  
![制品仓库-制品列表](./images/2.9.1.png)  

> ### 制品地址管理  
>> * 红框区域可以筛选查看某一类制品地址的制品列表。  
  ![制品仓库- 制品地址管理](./images/2.9.2-1.png)   

>> * 制品推送地址可以自行添加：  
  点击左上方“管理制品地址”按钮，进入目前已添加的制品地址列表：  
  ![制品仓库- 制品地址管理](./images/2.9.2-2.png)   
  可以点击右侧![制品仓库- 制品地址管理](./images/2.9.2-3.png)   删除该地址。  

>> * 点击“添加制品地址”，需要填写相关内容：
>>> 1.Driver - file  
>>>> 选择文件即制品类型为文件类型，需要选择存储位置，如果是存储在 local 本地，需要继续填写本地存储目录。  
  ![制品地址管理-DriverFile](./images/2.9.2.1-DriverFile.png)   

>>>> 如果选择存在S3，需要填写您的 S3 相关设置内容：  
  ![制品地址管理-DriverFile](./images/2.9.2.1-DriverFile2.png)   

>>> 2.Driver - registry  
>>>> 如果选择 Driver 类型为 registry，需要填写链接到对应仓库的配置信息，此后在创建项目的时候可以设置将制品推送到该仓库。  
   ![制品地址管理-DriverRegistry](./images/2.9.2.2-DriverRegistry.png)   

>>> 3.Driver -平台  
>>>> ![制品仓库- 制品地址管理-平台](./images/2.9.2.3-pingtai.png)  

>>>> 填写上述参数后，会弹出以下提示：   
   ![制品仓库- 制品地址管理-平台](./images/2.9.2.3-pingtai2.png)  
   前往平台按照提示完成操作，即完成了平台制品仓库的设置。
	   
> ### 制品详情  
>>点击制品名称可以进入该制品详情，在此展示了该制品的全部版本与详细信息，包括：  

>> * 版本号  
>> * 制品大小  
>> * 最近更新时间  
  ![制品仓库-制品详情](./images/2.9.3.png)  
 
>> 制品可以在部署应用实例时选择使用。

## DevOps管理后台

> ### 系统安装  
>> 在开始安装Daocloud Services管理后台前，您需要先输入证书（在您购买产品后会获得），点击“确认”后，会开始对输入的证书开始验证。  
  ![DevOps管理后台-系统安装](./images/2.10.1-1.png)  

>> 如果验证通过，会跳出设置用户信息界面。  
  用户名：默认admin  
  密码：需要进行设置  
  点击“开始安装”，会跳转到安装界面。  
  ![DevOps管理后台-系统安装](./images/2.10.1-2.png)  

>> 进入管理平台的安装界面（共五步）：  
>>> 1.设置平台的域名  
   输入完成后点击右下角“继续”，进入到下一步。
   ![DevOps管理后台-系统安装](./images/2.10.1-3.png)   
	
>>> 2.设置SMTP  
>>>> 输入SMTP服务器地址，选择是否使用TLS，输入您的用户名和密码  
   点击“继续”进入下一步（若想返回上一步重新设置，点击“返回”即可）。  
   您也可以选择“跳过”来跳过此阶段的设置（不会对系统安装产生影响）。  
   ![DevOps管理后台-系统安装](./images/2.10.1-4.png)   

>>> 3.设置代码仓库（GitHub Enterprise）  
>>>>  输入代码仓库的地址、GitHub Enterprise中的Client ID、Client 密钥这两项参数。  
>>>> 点击“继续”进入下一步，您也可以选择跳过此设置步骤。
   ![DevOps管理后台-系统安装](./images/2.10.1-5.png)   
	
>>> 4.设置企业用户目录  
>>>> 输入您的服务器主机以及端口号、基准DN（可以添加）、用户名称以及邮箱。  
   您可以选择性勾选每小时自动同步。  
   点击“测试并继续”进入下一步。  
   ![DevOps管理后台-系统安装](./images/2.10.1-6.png)   

>>> 5.设置中间件 
> 
>>> * 输入RabbitMQ、Redis、Postgres的信息。  
   点击“完成配置”，即可开始安装。  
   ![DevOps管理后台-系统安装](./images/2.10.1-7.png)   

>>> * 接下来会显示安装的概要以及当前安装的进度条，您可以点击“显示日志”来查看现在   正在进行安装操作的具体日志。
   ![DevOps管理后台-系统安装](./images/2.10.1-8.png)   
	
>>> * 点击“显示概要”，会返回刚刚的概要界面。  
   ![DevOps管理后台-系统安装](./images/2.10.1-9.png)   
   安装成功会弹出跳转控制台的提示，然后跳转管理控制台，详情见：系统状态-系统信息-系统配置。  
   安装失败会返回最近一个设置页面，需要修改后重新安装。

> ### 系统状态  
>> 进入控制台后，点击左侧导航栏的“系统状态”，您可以看到所有组件的当前状态，是正常或异常（状态信息每隔几分钟会进行自动刷新）。  
   ![DevOps管理后台-系统状态](./images/2.10.2.png)   

> ### 系统信息  
> 
> * 在管理控制台中，您可点击左侧导航栏“系统信息”，查看Daocloud Services 授权证书，包括密钥、名称、级别、类型以及有效期这五种信息。  
  ![DevOps管理后台-系统信息](./images/2.10.3.png)   
	
> *  在此您可以更新您的证书，点击“更新证书”按钮：  
  ![DevOps管理后台-系统信息](./images/2.10.3(2).png)   
  需要在弹出框中选择证书类型并填入新的证书，并确认更新。  
  修改License之后需要重启系统才能生效。

> ### 系统配置
>   
> * 点击左侧导航栏的“系统配置”，可对系统配置进行查看和更改。  
	
>>> 1.域名  
>>>> 可对平台域名进行更改，点击“保存”即可。  
   ![DevOps管理后台-系统配置-域名](./images/2.10.4-1.png)   

>>> 2.中间件  
>>>> 输入您需要更改的RabbitMQ/Redis/Postgres信息，点击“保存”。  
   ![DevOps管理后台-系统配置-中间件](./images/2.10.4-2.png)   

>>> 3.SMTP  
>>>> 输入SMTP服务地址信息，选择是否使用TLS，您的用户名和密码，点击“保存”。  
   ![DevOps管理后台-系统配置-SMTP](./images/2.10.4-3.png)

>>> 4.企业用户目录  
>>>> 输入您的服务器主机以及端口号、基准DN（可以添加）、用户名称以及邮箱。  
   您可以选择勾选是否需要每小时自动同步，也可选择点击“手动同步”，即同步一次。  
   点击“保存”即可。  
   ![DevOps管理后台-系统配置-企业用户目录](./images/2.10.4-4.png)  

>>> 5.代码仓库  
>>>> 输入新的代码仓库地址、Client ID、Client 密钥信息，点击保存。  
  ![DevOps管理后台-系统配置-代码仓库](./images/2.10.4-5.png)  

>>> 6.更新配置  
>
>>> * 您可以对你的系统配置进行更新。  
  示例对管理员组进行更改，当您对系统配置中的信息进行更改并点击“保存”后，系统右上角会显示您更改配置的个数，并提示您启动配置，使得您更改的信息生效。  
  ![DevOps管理后台-系统配置-更新配置](./images/2.10.4-6.1.png)  

>>> * 点击右上角“启用配置”，会显示您修改的字段名、修改前的值以及修改后的值，再次点击“启用配置”，会进入更新界面。  
  ![DevOps管理后台-系统配置-更新配置](./images/2.10.4-6.2.png)  

>>> * 您在更新界面可以看到目前组件更新的概要以及进度显示。  
  ![DevOps管理后台-系统配置-更新配置](./images/2.10.4-6.3.png)  
